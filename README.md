# Содержание
- [Описание проекта](#описание-проекта)
  - [Суть статьи](#суть-статьи)
    - [Метод построения верхних и нижних границ](метод-построения-верхних-и-нижних-границ)
    - [Новые меры неопределенности](#новые-меры-неопределенности)
      - [Агрегированные индикаторы неопределенности](#агрегированные-индикаторы-неопределенности)
  - [Загрузка данных [Запуск]](#загрузка-данных-запуск)
      - [Ввод](#ввод)
      - [Вывод](#вывод)
        - [CSV-файлы](#csv-файлы)
        - [Графики](#графики)
  - [Генерация графиков [Запуск]](#генерация-графиков-запуск)
    - [Графики для конкретного фондового рынка](#графики-для-конкретного-фондового-рынка)
      - [Доходности](#доходности)
      - [Вверхние и нижнии доверительные границы](#вверхние-и-нижнии-доверительные-границы)
      - [Меры неопределенности](#меры-неопределенности)
      - [Частотная гистограмма коэффициентов корреляции](#частотная-гистограмма-коэффициентов-корреляции)
    - [Общие графики для всех рассматриваемых фондовых рынков](#общие-графики-для-всех-рассматриваемых-фондовых-рынков)
      - [Меры неопределенности](#меры-неопределенности)
      - [Статистически незначимое множество выводов](#статистически-незначимое-множество-выводов-gxgamma_0pstar)
    - [Графики для конкретных групп фондовых рынков](#графики-для-конкретных-групп-фондовых-рынков)
  - [Генерация таблиц [Запуск]](#генерация-таблиц-запуск)
    - [Таблицы отображающие агрегированные показатели](#таблицы-отображающие-агрегированные-показатели-ki_1xpstar-и-ki_2xpstar)
    - [Таблица отображающая образовавшиеся группы фондовых рынков по показателям](#таблица-отображающая-образовавшиеся-группы-фондовых-рынков-по-показателям)
    - [Таблицы отображающие фондовые рынки, которые принадлежат к определенному интервалу](#таблицы-отображающие-фондовые-рынки-которые-принадлежат-к-определенному-интервалу)
    - [Таблицы для конкретного порога](#таблицы-для-заданного-gamma_0)
- [Практический интерес](#практический-интерес)
- [Коммерциализация](#коммерциализация)
- [Структура проекта](#структура-проекта)
- [Приложение](#приложение)
  - [Тесты](#тесты)
  - [Статистика коэффициента корреляции Пирсона](#статистика-коэффициента-корреляции-пирсона)
  - [Статистика коэффициента корреляции Кенделла](#статистика-коэффициента-корреляции-кенделла)
- [Авторы](#авторы)

# Описание проекта
Программа создавалась в рамках статьи `"Uncertainty of threshold similarity graph identification in correlation-based market networks"`. Она выгружает данные с международных рынков акций и на их основе позволяет моментально (с использованием кеша) рассчитывать сложно вычислимые формулы и отображать различные графики, столбчатые диаграммы и генерировать tex-таблицы. Все это помогало при анализе результатов из статьи.

## Суть статьи
Давайте представим, что наша задача проанализировать связь доходностей акций на разных фондовых рынках. Но мы понимаем, что все выводы о рынке неизбежно содержат неопределенность. Иначе бы мы очень просто могли выявить зависимость изменения одной акции от другой. Поэтому первостепенно поставим перед собой следующий вопрос: "Одинакова ли неопределенность
выводов о связях на различных рынках?".

Ранее чтобы измерить неопределенность использовали функцию риска для функции потерь. Но проблема этого подхода в том, что нужно знать (предполагать) истинную структуру связей.

В статье предложены новые показатели неопределенности. Новая концепция основана на построении верхней и нижней доверительных границ для ребер отсеченного графа.
Эти границы позволяют разделить все выводы на статистически значимые (надёжные) и незначимые.

❗Неопределенность определяется характеристиками множества незначимых выводов.

### Метод построения верхних и нижних границ
Методология построения множеств $U_e(x,\gamma_0,P^\star)$, $L_e(x,\gamma_0,P^\star)$ базируется на тестах проверки гипотез:\
  $h_{ij}^e:\gamma_{ij}>\gamma_0\mbox{ против } k_{ij}^e:\gamma_{ij}\leq\gamma_0,\ \ i,j=1,\ldots,N$\
  $h_{ij}^n:\gamma_{ij}\leq\gamma_0\mbox{ против } k_{ij}^n:\gamma_{ij}>\gamma_0,\ \ i,j=1,\ldots,N$

  Пара $(i, j)$ включается в $U_e(x,\gamma_0,P^\star)$, если гипотеза $h_{i,j}^e - \textcolor{ForestGreen}{принята}.$\
  Пара $(i, j)$ включается в $L_e(x,\gamma_0,P^\star)$, если гипотеза $h_{i,j}^n - \textcolor{red}{отклонена}.$

  Этот метод при фиксированном $\gamma_0$, позволяет нам разделить все выводы о корреляциях между доходностями акций на фондовом рынке на три типа:
  1. Статистически значимое множество выводов о наличии ребер при пороге $\gamma_0$: $L_e(x,\gamma_0,P^{\star})$ 
  > Такое множество пар между которыми точно надо провести ребро. (Связь есть)
    
  2. Статистически значимое множество выводов об отсутствии ребер при пороге $\gamma_0$: $L_n(x,\gamma_0,P^{\star})=J\setminus U_e(x,\gamma_0,P^{\star})$, $J=\{(i,j):i<j; i,j=1,...,N\}$ - Общее число пар для $N$ акций.
  >Такое множество пар между которыми точно не надо проводить ребро. (Связи нет)
    
  3. Статистически незначимое множество выводов при пороге $\gamma_0$: $G(x,\gamma_0,P^{\star})=U_e(x,\gamma_0,P^{\star})\setminus L_e(x,\gamma_0,P^{\star})=U_n(x,\gamma_0,P^{\star})\setminus L_n(x,\gamma_0,P^{\star})$
  >Такое множество пар между которыми можно как провести, так и не провести ребро. ❗Это множество характеризует неопределенность выводов.

### Новые меры неопределенности

Меры для количественной оценки неопределенности:
  - Отношение незначимых выводов к общему числу пар акций ($K_1$): \
    $K_1(x,\gamma_0,P^{\star})=\frac{|G(x,\gamma_0,P^{\star})|}{M}, \text{ где } M = |J| = \frac{N(N-1)}{2} \text{ - общее число пар акций}$
  - Отношение незначимых выводов к значимым ($K_2$):\
    $K_2(x,\gamma_0,P^{\star})=\frac{|G(x,\gamma_0,P^{\star})|}{|L_e(x,\gamma_0,P^{\star})\cup L_n(x,\gamma_0,P^{\star})|}$
  
#### Агрегированные индикаторы неопределенности
  - $K^i_1(x,P^{\star})=\sum_{s=1}^Kc_s\left[K^i_1(x,\gamma_s,P^{\star})\right]$
  - $K^i_2(x,P^{\star})=\sum_{s=1}^Kc_s\left[K^i_2(x,\gamma_s,P^{\star})\right]$
 
  $c_s\geq 0, \sum_{s=1}^Kc_s=1.$

  Агрегированные показатели позволяют избавиться от $\gamma_0$. То есть они независимы от силы связи в целом.

## Загрузка данных [Запуск]
### Ввод:
Программа работает с доходностями акций (Использует цены закрытия акций). Для этого нужно получить те самые цены закрытия. \
Сделать это можно так:
- Cоздать файл в каталоге `data_loading`, указав акции фондовой биржи, которые нужно выгрузить. \
  Пример файла `data_loading/UK/tickers.py`: 
  
  <img width="437" src="https://github.com/user-attachments/assets/b9ee86e6-5ff3-4ab1-9bac-98642b876db6" />

- В файл `data_loading/tickers_loading.py` импортировать нужный рынок (название списка из предыдущего пункта) и в списке `tickers_to_csv_list` указать подходящее название для `.csv` файла.

  <img width="604" src="https://github.com/user-attachments/assets/0d84e96a-8f8a-404d-ad50-fe3f593ce4d3" />

- Указать нужные даты для анализа в константы `START_DATA_FOR_ANALYSIS` и `END_DATA_FOR_ANALYSIS`. \
  Пример в файле `data_loading/tickers_loading.py`:
  
  <img width="400" src="https://github.com/user-attachments/assets/2991b9c1-99c5-4d90-ae0c-af595e1ac88f" />

### Вывод:

#### `.csv` файлы
Затем запустив файл `data_loading/tickers_loading.py`, произойдёт выгрузка данных с помощью библиотеки [`yfinance`](https://pypi.org/project/yfinance/). Эта библиотека выгружает данные с сайта [finance.yahoo.com](https://finance.yahoo.com/). \
После этого для каждого фондового рынка загрузяться два `.csv` файла.
  - Первый с постфиксом `_original`, который содержит оригинальные данные цен закрытия акций. (Сырые данные. В столбцах могут быть пропуски, например, если для какой-то даты не было торгов.)
    
    <img width="1073" src="https://github.com/user-attachments/assets/924bd722-c02f-4ce3-b351-a69f0792604c" />

  - Второй, который содержит обработанные данные (Все значения округляются до 4 знаков после запятой. Применяется линейная интерполяция, а к оставшимся пропускам `backward fill` + `forward fill`)
    
    <img width="1154" src="https://github.com/user-attachments/assets/e274d5c8-ee99-459d-b36f-5a3d5b86f04f" />
    
#### Графики
В директории `Data_For_Article/Closing_Prices_Graphics/` будут сохраняться графики для каждого фондового рынка, которые демонстрируют цены закрытия.

<img width="866" src="https://github.com/user-attachments/assets/b4953f72-cf11-4d5e-a028-180d103db842" />


## Генерация графиков [Запуск]
Запустив файл `main.py` получаем графики, которые можно разделить на три категории:
  1) [Графики для конкретного фондового рынка](#графики-для-конкретного-фондового-рынка)
  2) [Общие графики для всех рассматриваемых фондовых рынков](#общие-графики-для-всех-рассматриваемых-фондовых-рынков)
  3) [Графики для конкретных групп фондовых рынков](#графики-для-конкретных-групп-фондовых-рынков)

### Графики для конкретного фондового рынка
- #### Доходности
$\text{❗ Под доходностью понимается: }\ln\left(\frac{\text{current price}}{\text{previous price}}\right)$
  
![UK_Profitability](https://github.com/user-attachments/assets/93503f64-ca3f-46cf-84d5-08150d1d6a93)

> 🔎 Такие графики можно найти по пути: `Data_For_Articles/Graphics/Profitability/*.png`
  
- #### Вверхние и нижнии доверительные границы
  Графики ниже демонстрируют графическое представление мощности множеств $U_e(x,\gamma_0,P^\star)$, $L_e(x,\gamma_0,P^\star)$ при различных порогах $\gamma_0$ и при применении разных мер связей.
  
  - Корреляция Пирсона

    ![Dependence_Le_Ue_(Pearson_Correlation)](https://github.com/user-attachments/assets/c261fc22-b255-4722-a286-2c6b336dfd30)

  - Корреляция Кенделла
 
    ![Dependence_Le_Ue_(Kendall Correlation)](https://github.com/user-attachments/assets/8077b4e8-0d52-40e8-9d14-c2515a3dfd41)


  
- #### Меры неопределенности
  - Отношение незначимых выводов к общему числу пар акций ($K_1$): \
    $K_1(x,\gamma_0,P^{\star})=\frac{|G(x,\gamma_0,P^{\star})|}{M}$
    
    ![Dependence_K1](https://github.com/user-attachments/assets/dfb03791-b0c9-4df7-b111-a73f1c1f3281)


  - Отношение незначимых выводов к значимым ($K_2$):\
    $K_2(x,\gamma_0,P^{\star})=\frac{|G(x,\gamma_0,P^{\star})|}{|L_e(x,\gamma_0,P^{\star})\cup L_n(x,\gamma_0,P^{\star})|}$

    ![Dependence_K2](https://github.com/user-attachments/assets/bac1e4d4-9cc5-46df-ad4f-537bbb97d6e4)
  
- #### Частотная гистограмма коэффициентов корреляции
  - Коэффицент корреляции Пирсона

    ![Histogram_(Pearson_Correlation_Coefficient)](https://github.com/user-attachments/assets/eb264832-f190-4a25-b154-b34e13537e48)


  - Коэффицент корреляции Кенделла

    ![Histogram_(Kendall_Correlation_Coefficient)](https://github.com/user-attachments/assets/87deaf98-eca4-4389-8c57-d47929c94ec5)


> 🔎 Такие графики можно найти по пути: `Data_For_Articles/Graphics/Countries/*/*.png`
  
### Общие графики для всех рассматриваемых фондовых рынков:
- #### Меры неопределенности
  - $K_1 \text{(Коэффициент корреляции Пирсона)}$
 
    ![Dependence_K1_(Pearson_Correlation)_All](https://github.com/user-attachments/assets/14a8de0c-8297-4c65-b9aa-31b28b80ab1c)

  - $K_1 \text{(Коэффициент корреляции Кенделла)}$

    ![Dependence_K1_(Kendall_Correlation)_All](https://github.com/user-attachments/assets/8b762c1e-50fc-4895-8d0b-34b17b1f7906)


  - $K_2 \text{(Коэффициент корреляции Пирсона)}$

    ![Dependence_K2_(Pearson_Correlation)_All](https://github.com/user-attachments/assets/0b8e708c-9080-4993-bcb1-8bed13563803)


  - $K_2 \text{(Коэффициент корреляции Кенделла)}$

    ![Dependence_K2_(Kendall_Correlation)_All](https://github.com/user-attachments/assets/559fa751-1df2-4bbe-8869-3407fb20124d)

  
- #### Статистически незначимое множество выводов $G(x,\gamma_0,P^{\star})$
  - Для коэффициента корреляции Пирсона

   ![Dependence_G_(Pearson_Correlation)_All](https://github.com/user-attachments/assets/588e1e80-48b2-4b89-815b-b24a1dfdd769)


  - Для коэффициента корреляции Кенделла
 
    ![Dependence_G_(Kendall_Correlation)_All](https://github.com/user-attachments/assets/5dd1388e-2d45-4bef-b6d8-a917a8d7539f)


> 🔎 Такие графики можно найти по пути: `Data_For_Articles/Graphics/Countries/*.png`

### Графики для конкретных групп фондовых рынков
Графики из этого раздела генерируются на основе полученных таблиц (см. [Генерация таблиц [Запуск]](#генерация-таблиц-запуск))
В этом разделе для каждой таблицы и для каждого коэффициента корреляции генерируются графики. В нашем случае их можно разбить на следующие типы:
  1) График для групп в которых $K_1^i (Pearson) = 0.2$
  
  ![Dependence_K1_(Pearson_Correlation)_K1_0 2_Table2](https://github.com/user-attachments/assets/28e37380-0620-4b37-bdb1-a9243d5ca99e)

  2) График для групп в которых $K_1^i (Pearson) = 0.19$

  ![Dependence_K1_(Pearson_Correlation)_K1_0 19_Table2](https://github.com/user-attachments/assets/43f3eed3-0f46-4fd3-b659-6d14b61fdae4)
  
  3) График для групп в которых $K_1^i (Kendall) = 0.14$

  ![Dependence_K1_(Kendall_Correlation)_K1_0 14_Table3](https://github.com/user-attachments/assets/ab0d365d-562d-424b-8119-76cfe29569cb)

  4) График для групп в которых $K_1^i (Kendall) = 0.15$

  ![Dependence_K1_(Kendall_Correlation)_K1_0 15_Table3](https://github.com/user-attachments/assets/5a87349d-0d5e-4bf7-9506-80f75df3f026)

  5) График для групп в которых $K_2^i (Pearson) \in [0.6, 1)$

  ![Dependence_K2_(Pearson_Correlation)_K2_(0 6, 1)_Table4](https://github.com/user-attachments/assets/f97fd022-8851-4935-8603-67647b44583a)

  6) График для групп в которых $K_2^i (Kendall) \in [0.4, 0.6)$

  ![Dependence_K2_(Kendall_Correlation)_K2_(0 4, 0 6)_Table5](https://github.com/user-attachments/assets/2df3839f-e9b4-4d22-a29f-462368416cac)

  7) Графики в которых попарно берутся графики из пунктов 1-4:
      - График для групп в которых $K_1^i (Pearson) = 0.2, K_1^i (Kendall) = 0.14$ (Строится для корреляции Кенделла)
        ![Dependence_K1_Kd_P0 2_Kd0 14_Table6](https://github.com/user-attachments/assets/cf331db0-12f0-4438-aabf-df6ed09cf19e)
      - График для групп в которых $K_1^i (Pearson) = 0.2, K_1^i (Kendall) = 0.15$ (Строится для корреляции Кенделла)
        ![Dependence_K1_Kd_P0 2_Kd0 15_Table6](https://github.com/user-attachments/assets/740ab3b5-fe06-4345-ba6a-3f05481d765c)
      - График для групп в которых $K_1^i (Pearson) = 0.2, K_1^i (Kendall) = 0.14$ (Строится для корреляции Пирсона)
        ![Dependence_K1_P_P0 2_Kd0 14_Table6](https://github.com/user-attachments/assets/d1e0bc4a-fddb-4ebb-9f97-338a3c2982fc)
      - График для групп в которых $K_1^i (Pearson) = 0.2, K_1^i (Kendall) = 0.15$ (Строится для корреляции Пирсона)
        ![Dependence_K1_P_P0 2_Kd0 15_Table6](https://github.com/user-attachments/assets/3e5a098e-b974-4b2d-8e93-da79839aa50a)
  
  8) Графики в которых попарно берутся графики из пунтка 5-6:
      - График для групп в которых $K_2^i (Kendall) \in [0.4, 0.6), K_2^i (Pearson) \in [0.6, 1)$ (Строится для корреляции Кенделла)
        ![Dependence_K2_Kd_P(0 6, 1)_Kd(0 4, 0 6)_Table7](https://github.com/user-attachments/assets/38bd0228-379a-477f-afe0-070d0e2791dd)
      - График для групп в которых $K_2^i (Kendall) \in [0.4, 0.6), K_2^i (Pearson) \in [0.6, 1)$ (Строится для корреляции Пирсона)
        ![Dependence_K2_P_P(0 6, 1)_Kd(0 4, 0 6)_Table7](https://github.com/user-attachments/assets/ffd0765b-0e35-4eca-b452-06a460eed18c)

> 🔎 Такие графики можно найти по пути: `Data_For_Articles/Graphics/For_Tables/*.png`


## Генерация таблиц [Запуск]
Запустив файл `main.py` получаем код `tex`-таблиц.
Программа генерирует код для 3-х видов таблиц:
  1) [Таблицы отображающие агрегированные показатели](#таблицы-отображающие-агрегированные-показатели-ki_1xpstar-и-ki_2xpstar)
  2) [Таблица отображающая образовавшиеся группы фондовых рынков по показателям](#таблица-отображающая-образовавшиеся-группы-фондовых-рынков-по-показателям)
  3) [Таблицы отображающие фондовые рынки, которые принадлежат к определенному интервалу](#таблицы-отображающие-фондовые-рынки-которые-принадлежат-к-определенному-интервалу)
  4) [Таблицы для конкретного порога](#таблицы-для-заданного-gamma_0)

### Таблицы отображающие агрегированные показатели $K^i_1(x,P^{\star})$ и $K^i_2(x,P^{\star})$
Пример генерируемого tex-кода для таблицы:

```tex
% Filename: Ki_All.tex %

\begin{tabular}{ |c|c|c|c|c| }
\hline
& \multicolumn{2}{|c|}{Kendall} & \multicolumn{2}{|c|}{Pearson} \\
\cline{2-5}
\raisebox{1.5ex}{Markets} & $K_1^i$ & $K_2^i$ & $K_1^i$ & $K_2^i$ \\
\hline
    Australia & 0.15 & 0.46 & 0.2 & 0.72 \\ 
 \hline 
China & 0.18 & 0.34 & 0.19 & 0.32 \\ 
 \hline 
India & 0.15 & 0.96 & 0.21 & 1.15 \\ 
 \hline 
Japan & 0.14 & 0.44 & 0.2 & 0.71 \\ 
 \hline 
USA & 0.16 & 0.77 & 0.22 & 1.29 \\ 
 \hline 
Canada & 0.14 & 0.33 & 0.19 & 0.43 \\ 
 \hline 
Argentina & 0.22 & 0.44 & 0.16 & 0.23 \\ 
 \hline 
Brazil & 0.14 & 0.47 & 0.2 & 0.9 \\ 
 \hline 
UK & 0.15 & 0.51 & 0.2 & 0.76 \\ 
 \hline 
Italy & 0.17 & 0.53 & 0.18 & 0.51 \\ 
 \hline 
Spain & 0.15 & 0.48 & 0.2 & 0.45 \\ 
 \hline 
Sweden & 0.14 & 0.32 & 0.2 & 0.41 \\ 
 \hline 
\end{tabular}
```

![Снимок экрана 2025-05-05 в 14 40 34](https://github.com/user-attachments/assets/09a6012d-dd25-4279-a1aa-777f8d4f757e)

### Таблица отображающая образовавшиеся группы фондовых рынков по показателям
```tex
% Filename: K1i_Kd_Groups.tex %

\begin{tabular}{ |c|c| }
\hline
$K_1^i$ Kendall & Markets \\
\hline
    0.14 & Japan, Canada, Brazil, Sweden \\ 
    \hline 
    0.15 & Australia, India, UK, Spain \\ 
    \hline 
\end{tabular}
```

![Снимок экрана 2025-05-05 в 15 09 33](https://github.com/user-attachments/assets/178ae444-3f08-4759-a747-c2da320b4abb)

```tex
% Filename: K1i_P_Groups.tex %

\begin{tabular}{ |c|c| }
\hline
$K_1^i$ Pearson & Markets \\
\hline
    0.19 & China, Canada, Spain \\ 
    \hline 
    0.2 & Australia, Japan, Brazil, UK, Sweden \\ 
    \hline 
\end{tabular}
```

![Снимок экрана 2025-05-05 в 15 24 55](https://github.com/user-attachments/assets/b890848f-3b38-46c9-98db-709c4226f274)

### Таблицы отображающие фондовые рынки, которые принадлежат к определенному интервалу

```tex
% Filename: K2i_Kd_Interval.tex %

\begin{tabular}{ |c|c| }
\hline
& Markets \\
\hline
    [0.4, 0.6) & Argentina(0.44), Australia(0.46), Brazil(0.47), Italy(0.53), Japan(0.44), Spain(0.48), UK(0.51) \\ 
 \hline 
\end{tabular}
```

![Снимок экрана 2025-05-05 в 15 10 34](https://github.com/user-attachments/assets/5f452c96-b4b2-4b33-8ea0-c8f7018b1ce3)

```tex
% Filename: K2i_P_Interval.tex %

\begin{tabular}{ |c|c| }
\hline
& Markets \\
\hline
    [0.6, 1) & Australia(0.72), Brazil(0.89), Japan(0.7), UK(0.76) \\ 
 \hline 
\end{tabular}
```

![Снимок экрана 2025-05-05 в 15 36 01](https://github.com/user-attachments/assets/368cf681-13f8-4e1e-8ab5-f69d7b2920a7)


### Таблицы для заданного $\gamma_0$
Представлена таблица значений $K_1^i$, при пороге $\gamma_0 = 0.25$ для корреляции Пирсона
```tex
% Filename: K1i_P_gamma_0,25.tex %

\begin{tabular}{ | c | c | }
\hline
    Market & $K_1^i (Pearson)$ \\
\hline
    Australia market & 0.84   \\ \hline
    China market     & 0.48   \\ \hline
    India market     & 0.9    \\ \hline
    Japan market     & 0.83   \\ \hline
    USA market       & 0.93   \\ \hline
    Canada market    & 0.69   \\ \hline
    Argentina market & 0.4    \\ \hline
    Brazil market    & 0.9    \\ \hline
    UK market        & 0.83   \\ \hline
    Italy market     & 0.71   \\ \hline
    Spain market     & 0.65   \\ \hline
    Sweden market    & 0.61   \\ \hline
\end{tabular}
```

![Снимок экрана 2025-05-05 в 15 01 07](https://github.com/user-attachments/assets/56784c44-d52b-4343-9116-f0dff43653b8)

```tex
% Filename: K2i_Kd_gamma_0,2.tex %

\begin{tabular}{ | c | c | }
\hline
     Market & $K_2^i (Kendell)$ \\
\hline
    Australia market & 3.86   \\ \hline
    China market     & 1.39   \\ \hline
    India market     & 6.5    \\ \hline
    Japan market     & 4.71   \\ \hline
    USA market       & 10.32  \\ \hline
    Canada market    & 2.75   \\ \hline
    Argentina market & 1.14   \\ \hline
    Brazil market    & 4.53   \\ \hline
    UK market        & 3.14   \\ \hline
    Italy market     & 4.69   \\ \hline
    Spain market     & 3.57   \\ \hline
    Sweden market    & 2.09   \\ \hline
\end{tabular}
```

![Снимок экрана 2025-05-05 в 15 38 53](https://github.com/user-attachments/assets/711fa3ed-0ab2-4de1-8ec2-3d95399be55d)

> 🔎 Код таких таблиц можно найти по пути: `Data_For_Articles/Tables/tex/*.tex`

## Практический интерес
Как было сказано в разделе [Суть статьи](#суть-статьи), ранее для оценки неопределенности в сетевой структуре использовалась функция риска, которая требовала знание истинной структуры связей.
В рамках написания статьи были введены новые коэффициенты неопределенности, которые не требуют знания истинной структуры связей. 

Данная программа была написана, чтобы продемонстрировать использование новых коэффициентов неопределенности на реальных данных фондовых рынках. 

Были взяты 12 фондовых рынков из разных стран для оценки неопределнности рыночных графов. И на этих данных были продемонстрированы графики и таблицы для дальнейшего анализа (Использовались коэффициентов корреляции Пирсона и Кенделла). 
Такой инструмент может быть полезен в экономической сфере, и других, где требуется анализ сетевых структур.

## Коммерциализация
На основе данной программы можно создать продукт, который будет помогать в анализе сетевых структур.

Например, возьмём экономическую сферу. 
Допустим, я - экономист. Мне нужно изучить различные фондовые рынки. 
И я задаюсь вопросом: "Какие рынки мне лучше изучать?"
Ответ на этот вопрос очень простой: Лучше изучать более определенные рынки.
Далее следует вопрос: "А какие рынки более определенные?"
На этот вопрос, поможет ответить данная программа, которая проанализирует коэффициенты неопределенности,
выделит более определенные группы фондовых рынков и предоставит дополнительную информацию в виде графиков и таблиц для дальнейшего анализа.

# Структура проекта
```
Confidence_bounds_for_threshold_similarity_graph_in_random_variable_network
│
├── auxiliary
│   └── frange.py
│
├── calculations
│   ├── AuxiliarySets.py
│   ├── K.py
│   ├── T_Kd.py
│   └── T_P.py
│
├── data_loading
│   ├── Argentina
│   │   ├── tickers.py
│   │   ├── Argentina_daily_close_prices_2023.csv
│   │   └── Argentina_daily_close_prices_2023_original.csv
│   │
│   ├── Australia
│   │   ├── tickers.py
│   │   ├── Australia_daily_close_prices_2023.csv
│   │   └── Australia_daily_close_prices_2023_original.csv
│   │
│   ...
│   │
│   └── tickers_loading.py
│
├── Data_For_Article
│   ├── Closing_Prices_Graphics - Содержит графики цен закрытия для каждого фондового рынка.
│       └── ...
│   ├── Graphics
│   │   ├── Countries - Содержит графики для каждой страны в отдельности.
│           └── ...
│   │   ├── For_Tables - Содержит графики по таблицам из директории `Data_For_Article/Tables/tex/`.
│           └── ...
│   │   └── Profitability - Содержит графики по доходностям для каждой страны в отдельности.
│           └── ...
│   └── Tables
│       └── tex - Содержит сгенерированные tex-таблицы.
│           └── ...
│
├── cache.db
│
├── Data.py
├── Show.py
└── main.py

```

# Приложение

## Тесты
Методология построения $U_e(x,\gamma_0,P^\star)$, $L_e(x,\gamma_0,P^\star)$ основана на тестах:

```math
\varphi^e_{ij}(x) =
\begin{cases}
1, & T_{ij}(x) < c^e_{ij} \\
0, & T_{ij}(x) \geq c^e_{ij}
\end{cases}
```
```math
\varphi^n_{ij}(x) =
\begin{cases}
1, & T_{ij}(x) > c^n_{ij} \\
0, & T_{ij}(x) \leq c^n_{ij}
\end{cases}
```


$\text{Константы } c^n_{ij}, c^e_{ij} \text{ находяться из } P_{\gamma_0}(T_{ij}(x) > c_{ij}^n) = P_{\gamma_0}(T_{ij}(x) < c_{ij}^e) = \frac{\alpha}{M}, \text{ где } \alpha = 1 - P^\star$

## Статистика коэффициента корреляции Пирсона

```math
T_{i,j}=T_{i,j}^P=\frac{\sqrt{n - 2}}{2}(\ln{(\frac{1+r_{ij}}{1-r_{ij}})}-\ln{(\frac{1+\gamma_0^P}{1-\gamma_0^P})})
```

```math
r_{ij}=\frac{\sum_{t=1}^n{(x_i(t)-\overline{x_i})(x_j(t)-\overline{x_j})}}{\sqrt{\sum_{t=1}^n{(x_i(t)-\overline{x_i})^2\sum_{t=1}^n{(x_j(t)-\overline{x_j})^2}}}}
```

## Статистика коэффициента корреляции Кенделла

```math
T_{i,j}=T^{Kd}_{i,j}=\frac{\hat{\gamma}^{Kd}_{i,j}-\gamma_0}{4\sqrt{\hat{P}_{cc}-\hat{P}_c^2}}
```

```math
\hat{\gamma}_{i,j}^{Kd}=\frac{1}{n(n-1)}\sum_{s=1}^n\sum_{\begin{array}{l}t=1\\t\neq s\end{array}}^n I_{i,j}^{Kd}(t,s)
```

```math
I_{i,j}^{Kd}(t,s)=\left\{\
\begin{array}{ll}
1,& (x_i(t)-x_i(s))(x_j(t)-x_j(s))\geq 0\\
0,& (x_i(t)-x_i(s))(x_j(t)-x_j(s))< 0
\end{array}\right.
```

# Авторы
- Цыганков Вячеслав Вячеславович, студент 4-го курса ПМИ, НИУ ВШЭ - Нижний Новгород
- Колданов Пётр Александрович, д.ф.м.н. проф. каф. ПМИ, НИУ ВШЭ - Нижний Новгород
